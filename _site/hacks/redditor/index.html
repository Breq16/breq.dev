<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />

<!-- mobile -->
<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png" />
<link rel="manifest" href="/assets/icons/site.webmanifest" />
<link rel="shortcut icon" href="/assets/icons/favicon.ico" />
<meta name="msapplication-config" content="/assets/icons/browserconfig.xml" />

<!-- bootstrap -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<!-- fontawesome -->
<script src="https://kit.fontawesome.com/69d45d8e8c.js" crossorigin="anonymous"></script>

<!-- google fonts -->
<link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet" />

<!-- site-specific -->
<link rel="stylesheet" href="/assets/css/styles.css" />

  
      <title>AutoRedditor</title>
  
</head>

<body>

    <div class="content-wrap">
        <div class="navbar sticky-top navbar-expand-lg">
    <div class="container">
        <a class="navbar-brand" href="/">breq.dev</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="fas fa-hamburger"></span> <!-- haha, hamburger menu -->
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                
                    <li class="nav-item">
                        <a
                            class="nav-link "
                            href="/projects">
                            projects</a>
                    </li>
                
                    <li class="nav-item">
                        <a
                            class="nav-link nav-active"
                            href="/hacks">
                            hacks</a>
                    </li>
                
                    <li class="nav-item">
                        <a
                            class="nav-link "
                            href="/archives">
                            archives</a>
                    </li>
                
                    <li class="nav-item">
                        <a
                            class="nav-link "
                            href="/featured">
                            featured</a>
                    </li>
                
                    <li class="nav-item">
                        <a
                            class="nav-link "
                            href="/contact">
                            contact</a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>


        <br>
<div class="container page">

<h1>AutoRedditor</h1>

    <p>A service for caching and providing random Reddit posts.</p>







<div class="row">
    
    <div class="col-xl-4 col-lg-6 col-md-6">
        <div class="bordered-box">
            <span>Project Date</span>
            <h3><i class="fas fa-calendar"></i> 2020</h3>
        </div>
    </div>
    
    
    <div class="col-xl-4 col-lg-6 col-md-6">
        <div class="bordered-box">
            <h3><i class="fab fa-github"></i> View Source Code</h3>
            <span>
                <a target="_blank" href="https://github.com/Breq16/redditor">Breq16/redditor</a>
            </span>
        </div>
    </div>
    
    
    <div class="col-xl-4 col-lg-6 col-md-6">
        <div class="bordered-box">
            <h3><i class="fas fa-laptop"></i> View Hosted Demo</h3>
            <span>
                <a target="_blank" href="https://redditor.breq.dev/">https://redditor.breq.dev/</a>
            </span>
        </div>
    </div>
    
</div>


<h2 id="overview">Overview</h2>

<p>This is a service to cache and retrieve Reddit posts.</p>

<h2 id="motivation">Motivation</h2>

<p>When I started to work on <a href="/projects/breqbot/">Breqbot</a>, I wanted to return popular posts from Reddit. However, the Reddit API doesn’t provide a “random popular” function. The closest options were to retrieve either a random post, which could be low-quality, or the top posts of a certain time period, which will repeatedly return the same posts.</p>

<p>So, when I started to implement Breqbot’s Reddit feature, I added a built-in cache feature. Every couple hours, a background process would retrieve the top 100 posts from each subreddit and cache each post ID in a database. Then, when a user requests a Reddit post, the bot will query the database for a random post.</p>

<p>Eventually, as my bot became more complex, I decided to try to spin off certain functionality into their own services to improve maintainability and reliability. The Reddit functionality was an easy choice – it had its own worker processes, and its use of the database can be easily isolated. This would also allow me or others to build other services which access random Reddit posts. Thus, I spun out AutoRedditor into its own separate service.</p>

<h2 id="technical-description">Technical Description</h2>

<p>AutoRedditor is built around <a href="https://redis.io/">Redis</a>. The worker thread will look through the list of subreddits and configurations, then retrieve the top posts of each week from Reddit and populating the Redis database. It will also use configured filters, which could (for instance) require a certain post type or block content marked as a spoiler. The posts are stored as a sorted set, so that once new entries are added to the database, old posts can be removed.</p>

<p>In addition, to prevent post repetition, clients can provide a “channel” parameter with a unique identifier for where they are serving the Reddit posts. AutoRedditor will create a sorted set to cache the most recent posts sent to that channel to ensure no repetition happens.</p>

<h2 id="results">Results</h2>

<p>The service works well enough that I’m using it to power Breqbot. Using an in-memory database like Redis has enabled this service to be fast enough for a real-time application like a Discord bot. Going through the process of breaking off functionality from an existing project into its own independent service was also unique and interesting.</p>



</div>
<br>

    </div>
    <div class="footer">
    <div class="container">
        <br>
        <br>
        <p>
            made with <i class="fas fa-heart" aria-hidden="true"></i>
            <span class="sr-only">love</span> by breq,

            <i class="far fa-copyright" aria-hidden="true"></i>
            <span class="sr-only">copyright</span> 2020,

            <i class="fab fa-github" aria-hidden="true"></i>
            <span class="sr-only">github</span>
            <a href="https://github.com/Breq16/breq.dev" target="_blank">Breq16/breq.dev</a>
        </p>
        <br>
        <p>
            
            <i class="fas fa-envelope" aria-hidden="true"></i>
            <span class="sr-only">email</span>
            
            <a href="mailto:breq@breq.dev" target="_blank">breq@breq.dev</a>
            
            •
            
            <i class="fab fa-discord" aria-hidden="true"></i>
            <span class="sr-only">discord</span>
            
            <span>Breq#8296</span>
            
            •
            
            <i class="fab fa-keybase" aria-hidden="true"></i>
            <span class="sr-only">keybase</span>
            
            <a href="https://keybase.io/breq" target="_blank">breq</a>
            
            •
            

            <a href="/contact" target="_blank">more
            <i class="fas fa-angle-double-right" aria-hidden="true"></i></a>
        </p>
        <br>
        <br>
    </div>
</div>

</body>

</html>
